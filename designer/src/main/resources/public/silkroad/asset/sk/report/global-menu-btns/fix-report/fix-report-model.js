define(["url"],function(a){var b=Backbone.Model.extend({defaults:{granularityList:{parent:{D:"每日",W:"每周",M:"每月",Q:"每季",Y:"每年"},child:{}}},initialize:function(){for(var a=this.get("granularityList"),b={},c={},d=1;7>=d;d++)b["W"+d]=d;for(var d=1;28>=d;d++)c["M"+d]=d;c.lastDay="最后一天",a.child.W=b,a.child.M=c,a.child.Q={Q1:1,lastDay:"最后一天"},a.child.Y={Y1:1,lastDay:"最后一天"}},getFixReportTaskMgrList:function(b){$.ajax({url:a.getFixReportTaskMgrList(this.get("reportId")),type:"get",success:function(a){var c={};c.taskMgrList=a.data||[],b(c)}})},startTask:function(b,c,d){$.ajax({url:a.startTask(this.get("reportId"),b,c),type:"post",success:function(a){d(a.statusInfo)}})},delTask:function(b,c){$.ajax({url:a.delTask(this.get("reportId"),b),type:"delete",success:function(a){c(a.statusInfo)}})},saveTaskInfo:function(b,c){$.ajax({url:a.saveTaskInfo(this.get("reportId")),data:b,type:"post",success:function(a){c(a)}})},getTaskInfo:function(b,c){var d=this;$.ajax({url:a.getTaskInfo(this.get("reportId"),b),type:"get",success:function(a){d.getParamData(b,c,a.data)}})},getParamData:function(b,c,d){var e=this,f={taskId:b};$.ajax({url:a.getParamData(this.get("reportId")),data:f,type:"get",success:function(a){var b={};b.taskInfo=d,b.paramList=a.data,b.taskInfo.executeStrategy||(b.taskInfo.executeStrategy={hour:"",minute:"",granularity:"D"});var f=b.taskInfo.executeStrategy.granularity,g=e.get("granularityList");b.taskInfo.granularityList=g,b.taskInfo.granularityList.selectChild=g.child[f],c(b)}})}});return b});